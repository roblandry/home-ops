{
  $schema: "https://docs.renovatebot.com/renovate-schema.json",

  packageRules: [
    {
      description: "Auto-merge Gitea Docker images",
      matchDatasources: ["docker"],
      automerge: true,
      automergeType: "branch",
      matchPackagePatterns: ["^gitea\\.${SECRET_DOMAIN}/"],
      // matchPackagePatterns: ["^gitea\\.\\$\\{SECRET_DOMAIN\\}/"],
      registryUrls: ["https://gitea.{{ secrets.GITEA_REGISTRY_HOST }}"],
      ignoreTests: true,
    },
  ],

  registryAliases: {
    "gitea.${SECRET_DOMAIN}": "gitea.{{ secrets.GITEA_REGISTRY_HOST }}",
  },

  hostRules: [
    {
      hostType: "docker",
      matchHost: "gitea.{{ secrets.GITEA_REGISTRY_HOST }}",
      username: "{{ secrets.GITEA_REGISTRY_USER }}",
      password: "{{ secrets.GITEA_REGISTRY_PASS }}",
    },
  ],

  pinDigests: true,
}
